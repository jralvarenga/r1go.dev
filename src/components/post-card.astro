---
import type { Post } from "../types/posts";

type Props = {
  post: Post;
  variant?: "compact" | "full";
};

const { post, variant = "compact" } = Astro.props;
const isCompact = variant === "compact";
---

<a
  href={post.href}
  class:list={[
    "group flex items-start transition-colors",
    isCompact
      ? "rounded-lg p-2 -mx-2 hover:bg-muted/40 gap-2"
      : "rounded-2xl px-4 py-3 hover:bg-muted/40 gap-3",
  ]}
>
  <div
    class:list={[
      "rounded-sm mt-0.5 flex items-center justify-center text-muted-foreground opacity-80 group-hover:opacity-100 transition-opacity",
      isCompact ? "h-4 w-4" : "h-5 w-5",
    ]}
  >
    <svg
      class:list={[isCompact ? "w-3 h-3" : "w-4 h-4"]}
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"
      ></path>
    </svg>
  </div>
  <div class="flex-1 min-w-0">
    <div class="flex items-baseline gap-1.5 flex-wrap">
      <h3
        class:list={[
          "font-medium text-foreground",
          isCompact ? "text-sm" : "text-base",
        ]}
      >
        {post.title}
      </h3>
      <span
        class:list={[
          "text-muted-foreground",
          isCompact ? "text-[10px]" : "text-xs",
        ]}
      >
        {post.date}
      </span>
    </div>
    <p
      class:list={[
        "text-muted-foreground mt-0.5",
        isCompact
          ? "text-xs leading-relaxed line-clamp-1"
          : "text-sm leading-relaxed",
      ]}
    >
      {post.description}
    </p>
  </div>
  <svg
    class:list={[
      "text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity",
      isCompact ? "w-3 h-3 mt-0.5" : "w-4 h-4 mt-1",
    ]}
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M9 5l7 7-7 7"
    ></path>
  </svg>
</a>
